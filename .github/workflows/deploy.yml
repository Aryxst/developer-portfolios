name: Deploy to GitHub Pages

on:
 push:
  branches: [master]
 workflow_dispatch:

permissions:
 contents: read
 pages: write
 id-token: write
defaults:
 run:
  working-directory: ./website
jobs:
 build:
  runs-on: ubuntu-latest
  steps:
   - name: Checkout your repository using git
     uses: actions/checkout@v4
   - name: Install, build, and upload your site output
     uses: withastro/action@v2
     with:
      package-manager: bun

 deploy:
  needs: build
  runs-on: ubuntu-latest
  environment:
   name: github-pages
   url: ${{ steps.deployment.outputs.page_url }}
  steps:
   - name: Deploy to GitHub Pages
     id: deployment
     uses: actions/deploy-pages@v4
